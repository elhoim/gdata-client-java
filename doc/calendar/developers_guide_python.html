<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Google Calendar Data API Developer's Guide</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="stylesheet" type="text/css" href="../css/dev_docs.css" />
<link rel="stylesheet" type="text/css" href="css/local_extensions.css" />
<!--[if IE 7]>
  <link rel="stylesheet" type="text/css" href="../css/ie7only.css" />
<![endif]-->
<!--[if lte IE 6]>
  <link rel="stylesheet" type="text/css" href="../css/ie6only.css" />
<![endif]-->
<!--[if IE]>
  <link rel="stylesheet" type="text/css" href="../css/ieonly.css" />
<![endif]-->
<style type="text/css">
<!--
h1 a, h2 a, h3 a, h4 a, h5 a, h6 a {
 	color: #000000;
}

-->
</style>
<script type="text/javascript">
<!--
var cancelBubble = false;

function goTo(url) {
  window.location = url;
}
//-->
</script>
</head>
<body class="t5" id="developers_guide_page">
<a name="top"></a>
<!-- ########## PAGE HEADER ########## -->

<div id="header">
  <div id="logo"><a href="http://code.google.com/"><img src="http://code.google.com/images/code_sm.png" border="0" alt="Return to Google Code homepage" /></a></div>
  <h1 id="doc_title">Google Calendar Data API</h1>
</div>
<!-- ########## END PAGE HEADER ########## -->
<div id="wrapper"> 
  <!-- ########## SIDE NAVIGATION ########## -->
   <script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
  _uacct = "UA-18071-1";
  urchinTracker();
</script>

<div id="sidenav">
  <ul>
    <li>
      <h1>Calendar</h1>
      <ul>
        <!-- ID tag identifies current page -->
        <li><a href="overview.html" id="overview_link">Overview</a></li>
        <li><a href="developers_guide_protocol.html" id="developers_guide_link">Developer's Guide</a></li>
        <li><a href="reference.html" id="reference_link">Reference Guide</a></li>
        <li><a href="http://www.google.com/googlecalendar/terms_of_use.html">Terms and Conditions</a></li>
      </ul>
    </li>
    <li>
      <h1>GData Protocol</h1>
      <ul>
        <li><a href="../gdata/overview.html">Overview</a></li>
        <li><a href="../gdata/clientlibs.html">Client Libraries</a></li>
        <li><a href="../gdata/auth.html">Authentication</a></li>
      </ul>
    </li>
    <li>
      <h1>Support Resources</h1>
      <ul>
        <li><a href="http://code.google.com/support/bin/topic.py?topic=10023">Knowledge Base</a></li>
        <li><a href="http://groups.google.com/group/google-calendar-help-dataapi">Discussion Group</a></li>
      </ul>
    </li>
  </ul>
</div>

  <!-- ########## END SIDE NAVIGATION ########## -->
  <!-- ########## PAGE CONTENT ########## -->

<div id="pagecontent"> 
    <h1 id="page_title">Google Calendar Data API Developer's Guide: Python</h1>

<div id="topnav">
<table id="mt" cellspacing="0" cellpadding="0" width="100%" border="0">
<tr>
<th class="int1" onclick="if (!cancelBubble) goTo('developers_guide_protocol.html');">
<div class="tc1"><div class="tc2"><div class="tc3"></div></div></div>
<div class="tT"><a onclick="cancelBubble=true;" href="developers_guide_protocol.html">Protocol</a></div>
</th><td>&nbsp;&nbsp;</td>
<th class="int2" onclick="if (!cancelBubble) goTo('developers_guide_java.html');">
<div class="tc1"><div class="tc2"><div class="tc3"></div></div></div>
<div class="tT"><a onclick="cancelBubble=true;" href="developers_guide_java.html">Java</a></div>
</th><td>&nbsp;&nbsp;</td>
<th class="int3" onclick="if (!cancelBubble) goTo('developers_guide_dotnet.html');">
<div class="tc1"><div class="tc2"><div class="tc3"></div></div></div>
<div class="tT"><a onclick="cancelBubble=true;" href="developers_guide_dotnet.html">.NET</a></div>
</th><td>&nbsp;&nbsp;</td>
<th class="int4" onclick="if (!cancelBubble) goTo('developers_guide_php.html');">
<div class="tc1"><div class="tc2"><div class="tc3"></div></div></div>
<div class="tT"><a onclick="cancelBubble=true;" href="developers_guide_php.html">PHP</a></div>
</th><td>&nbsp;&nbsp;</td>
<th class="int5" onclick="if (!cancelBubble) goTo('developers_guide_python.html');">
<div class="tc1"><div class="tc2"><div class="tc3"></div></div></div>
<div class="tT"><a onclick="cancelBubble=true;" href="developers_guide_python.html">Python</a></div>
<td width="100%">&nbsp;</td>
</tr>
</table>

<table cellspacing="0" cellpadding="0" width="100%" align="center" border="0" class="st">
<tr>
<td height="4" align="right" style="padding:0px; vertical-align:top">
<div class="stur"></div>
</td>
</tr>
</table>
</div>


    <p>Google Calendar allows client applications to view and update calendar events in the form of Google data API (&quot;GData&quot;) feeds. Your client application can use the Google Calendar data API to create new events, edit or delete existing events, and query for events that match particular criteria.</p>    
    <p>There are many possible uses for the Calendar data API. For example, you can create a web front end for your group's calendar that uses Google Calendar as a back end. Or you can generate a public calendar for Google Calendar to display, based on your organization's event database. Or you can search relevant calendars to display a list of upcoming events on those calendars.</p>
    <p>This document provides detailed examples for using the <a href="http://code.google.com/p/gdata-python-client/">Python Client Library</a> to work with the Google Calendar service.  You will find examples of adding events, updating events, deleting events and querying events.  If you're interested in understanding more about the underlying protocol used by the Python Client Library to interact with the Calendar data API, please see the <a href="developers_guide_protocol.html">protocol tab</a>.</p> 
    
    <h1>Contents</h1>
    <ol class="toc">
      <li><a href="#Audience">Audience</a></li>
      <li><a href="#GettingStarted">Getting started</a></li>
      <li><a href="#Auth">Authenticating to the Calendar service</a> 
        <ol class="toc">
          <li><a href="#AuthAuthSub">AuthSub proxy authentication</a></li>
          <li><a href="#AuthClientLogin">ClientLogin username/password authentication</a></li>
          <li><a href="#AuthMagicCookie">Magic cookie authentication</a></li>
        </ol>
      </li>
	  <li><a href="#RetrievingCalendars">Retrieving a list of calendars</a></li>
      <li><a href="#RetrievingEvents">Retrieving events</a>
        <ol class="toc">
          <li><a href="#RetrievingWithoutQuery">Retrieving events without query parameters</a></li>
          <li><a href="#RetrievingDateRange">Retrieving events for a specified date range</a></li>
          <li><a href="#RetrievingWithQuery">Retrieving events matching a full text query </a></li>
        </ol>
      </li>
      <li><a href="#CreatingEvents">Creating events</a>
        <ol class="toc">
          <li><a href="#CreatingSingle">Creating single-occurence events</a></li>
          <li><a href="#CreatingRecurring">Creating recurring events</a></li>
        </ol>
      <li><a href="#UpdatingEvents">Updating events</a> 
      <li><a href="#DeletingEvents">Deleting events</a> 
      <li><a href="#AdditionalOps">Additional operations</a>
        <ol class="toc">
          <li><a href="#ExtendedProps">Extended properties</a></li>
          <li><a href="#Reminders">Reminders and Notifications</a></li>
        </ol>
    </ol>
    
    <h1><a name="Audience" id="Audience">Audience</a></h1>
    <p>This document is intended for programmers who want to write client applications using the GData Python client library that can interact with Google Calendar.</p>
    
    <h1><a name="GettingStarted">Getting started</a></h1>
    <p>The Python client library is available for <a href="http://code.google.com/p/gdata-python-client/downloads/list">download from the project page</a> or from the <a href="http://code.google.com/p/gdata-python-client/source">Subversion repository</a>.  You will also need to download and install the <a href="http://effbot.org/zone/element-index.htm">ElementTree</a> package.  Also note that to use the Python client library, you must be running Python 2.2 or newer.</p>
    <p>A full working copy of this sample is available in the <code>CalendarExample.py</code> file, under the directory <code>gdata-python-client/samples/calendar/</code>.  You can run the sample with the following arguments:</p>
    <pre>python calendarExample.py --user [username] --pw [password] --delete [true|false]</pre>
    <p>The sample performs a number of operations on the provided user's calendar to demonstrate the use of the Calendar data API.  Please see the <code>Run</code> method of the code for more details as to which operations are performed, but you'll want to be sure to use a test account so you don't modify or delete your real data.</p>  
    <p>To run the examples in this document in your own code, you'll need to use the following import statements:</p>
<pre>
try:
  from xml.etree import ElementTree # for Python 2.5 users
except ImportError:
  from elementtree import ElementTree
import gdata.calendar.service
import gdata.service
import atom.service
import gdata.calendar
import atom
import getopt
import sys
import string
import time
</pre>
    
    <h1><a name="Auth">Authenticating to the Calendar service</a></h1>
    <p>The Python client library can be used to work with either public or private feeds.  Public feeds are read-only, but do not require any authentication.  Private feeds require that you authenticate to the calendar servers.  This can be done via <a href="#AuthClientLogin">ClientLogin</a> username/password authentication or <a href="#AuthAuthSub">AuthSub</a> proxy authentication.  The calendar service also allows authentication to a read-only private feed using <a href="#AuthMagicCookie">magic cookie</a> authentication.</p>
    <p>For an overview of authentication with the calendar API, see <a href="http://code.google.com/support/bin/answer.py?answer=64253">the relevant article</a> in the Developer Knowledge Base.  For more information about authentication with Google Data APIs in general, please see the <a href="../gdata/auth.html">authentication documentation</a>.</p>
    
    <h2><a name="AuthAuthSub" id="AuthAuthSub">AuthSub proxy authentication</a></h2>
    <p>AuthSub proxy authentication is used by web applications which need to authenticate their users to Google accounts.  The website operator does not need access to the username and password for the calendar user - only special AuthSub tokens are required.  Please see the <a href="/apis/accounts/AuthForWebApps.html">AuthSub documentation</a> for more detailed information.</p>
    <p>When a user first visits your application, they have not yet been authenticated. In this case, you need to print some text and a link directing the user to Google to authenticate your request for access to their calendar.  The Python GData client library provides a function to generate this URL from the <code>CalendarService</code> class.  The code below sets up a link to the <code><a href="../../apis/accounts/AuthForWebApps.html#AuthSubRequest">AuthSubRequest</a></code> page.</p>
    <pre>
def GetAuthSubUrl():
  next = 'http://www.coolcalendarsite.com/welcome.pyc'
  scope = 'http://www.google.com/calendar/feeds/'
  secure = False
  session = True
  calendar_service = gdata.calendar.service.CalendarService()
  return calendar_service.GenerateAuthSubURL(next, scope, secure, session);

authSubUrl = GetAuthSubUrl();
print '&lt;a href="%s"&gt;Login to your Google account&lt;/a&gt;' % authSubUrl</pre>
    <p>Notice the parameters sent to the <code>GenerateAuthSubURL</code> method:</p>
    <ul>
      <li><b>next</b>, the URL of the page that Google should redirect the user to after authentication.</li>
      <li><b>scope</b>, indicating that the application will only access Google Calendar feeds.</li>
      <li><b>secure</b>, indicating that the token returned will not be a secure token.</li>
      <li><b>session</b>, indicating this token can be exchanged for a multi-use (session) token.</li>
    </ul>
    <p>The URL will look something like this:<p>
    <pre>https://www.google.com/accounts/AuthSubRequest?scope=http%3A%2F%2Fwww.google.com%2Fcalendar%2Ffeeds%2F&session=1&secure=0&next=http%3A%2F%2Fwww.coolcalendarsite.com%2Fwelcome.pyc%2F</pre> 
    <p>The user will then follow the link to Google's site and authenticate to their Google account.</p>
    <p>After the user authenticates, they will be redirected back to the <code>next</code> URL. The URL will have a single-use token value appended to it as a query parameter. The URL the user will be redirected to will look something like this:  
    <pre>http://www.coolcalendarsite.com/welcome.pyc?token=14a87fe98219731acd516</pre>
    <p>The calendar service only supports session tokens, so we need to exchange this single-use token for a session token.  The following code snippet shows how to upgrade the single-use token to a session token, and then retreive the user's calendar list.</p>
    <pre>
calendar_service = gdata.calendar.service.CalendarService()
calendar_service.auth_token = authsub_token
calendar_service.UpgradeToSessionToken()
feed = calendar_service.GetCalendarListFeed()
for i, a_calendar in enumerate(feed.entry):
  print '\t%s. %s' % (i, a_calendar.title.text,)</pre>
    <p>In this snippet, the <code>authsub_token</code> variable contains the value from the <code>token</code> query parameter in the URL.  There are several ways to retrieve this value, for example:</p>
    <pre>
import cgi

parameters = cgi.FieldStorage()
authsub_token = parameters['token']
</pre>
    <p>This token value represents a single-use AuthSub token.  Since we specified <code>session = True</code> above, this token can be exchanged for an AuthSub session token using the <code>CalendarService.UpgradeToSessionToken</code> method, which calls the <a href="../../apis/accounts/AuthForWebApps.html#AuthSubSessionToken"><code>AuthSubSessionToken</code></a> service.</p>

    <h2><a name="AuthClientLogin" id="AuthClientLogin">ClientLogin username/password authentication</a></h2>
    <p>To use ClientLogin (also called &quot;Authentication for Installed Applications&quot;), first create a instance of <code>CalendarService</code> and set the credentials, then invoke the <code>ProgrammaticLogin</code> method.  For example:</p>
    <pre>calendar_service = gdata.calendar.service.CalendarService()
calendar_service.email = 'username@domain.com'
calendar_service.password = 'mypassword'
calendar_service.source = 'Google-Calendar_Python_Sample-1.0'
calendar_service.ProgrammaticLogin()</pre>
    <p>Calling calendar_service.ProgrammaticLogin() will send the email and password defined above to Google's <a href="../../apis/accounts/AuthForInstalledApps.html">ClientLogin</a> authentication service.  This service responds with a token which is then added as part of the Authorization header to the CalendarService object.  All future requests using this CalendarService object will include this Authorization header.  For more information about authentication systems, see the <a href="../../apis/accounts/Authentication.html">Google Account Authentication</a> documentation.</p> 

    <h2><a name="AuthMagicCookie" id="AuthMagicCookie">Magic cookie authentication</a></h2>
    <p>Magic cookie authentication can be used in cases where you want to retrieve a read-only feed containing private calendar events. A magic cookie can be specified in the URL of the feed. In the following example feed URL, 'abcdefg' is the magic cookie:</p>
    <pre>http://www.google.com/calendar/feeds/username@gmail.com/private-abcdefg/full/</pre>
    <p>The appropriate value for a magic cookie can be obtained through the 'Calendar details' page in the UI for each of your calendars. It is labeled as a 'Private Address'.</p>
    <p>The following code creates a <code>CalendarEventQuery</code> object with the magic cookie information, retrieves the feed using the <code>CalendarService</code> object, then displays the title of each event.   
    <pre>
username = 'username@gmail.com'
visibility = 'private-abcdefg'
projection = 'full'
query = gdata.calendar.service.CalendarEventQuery(username, visibility, projection)

calendar_service = gdata.calendar.service.CalendarService()
feed = calendar_service.CalendarQuery(query)
for i, an_event in enumerate(feed.entry):
  print '\t%s. %s' % (i, an_event.title.text,)</pre>
    <p>Notice the options used to create the <code>CalendarEventQuery</code>:</p>
    <ul>
      <li><b>username</b>, indicating the username (in e-mail address form) of the calendar which you are accessing</li>
      <li><b>visibility</b> specifying the private visibility feed along with the magic cookie value</li>
      <li><b>projection</b>, indicating the use of the full projection (as opposed to the basic projection, composite projection or others)</li>
    </ul>
    <p>Please see the <a href="reference.html#Feeds">Reference Guide</a> for more information about the Calendar feed types.</p>
    
    <h1><a name="RetrievingCalendars" id="RetrievingCalendars">Retrieving a list of calendars</a></h1>
    <p>The <code>CalendarService</code> object supports retrieving a list of calendars for the authenticated user.  This is the same list of calendars that is presented in the UI, except those marked as 'hidden' are also available.  You cannot retrieve a list of another user's calendars.  The following example presumes that you already have a <code>CalendarService</code> object which has credentials via either AuthSub or ClientLogin method.</p>
	<pre>
def PrintUserCalendars(calendar_service):
  feed = calendar_service.GetCalendarListFeed()
  print feed.title.text
  for i, a_calendar in enumerate(feed.entry):
    print '\t%s. %s' % (i, a_calendar.title.text,)</pre>
    <p>Although we are only printing the title of the calendar in this case, we can also access other information, including the color of the calendar, the timezone, and more.  See <code>CalendarListEntry</code> for more details on available attributes.</p>

    <h1><a name="RetrievingEvents" id="RetrievingEvents">Retrieving events</a></h2>
   
    <h2><a name="RetrievingWithoutQuery" id="RetrievingWithoutQuery">Retrieving events without query parameters</a></h2> 
    <p>Like the list of calendars, events are also retrieved using the <code>CalendarService</code> class. This example specifies the use of the private visibility feed which requires that the <code>CalendarService</code> object was already <a href="#Auth">authenticated</a> using either the AuthSub or ClientLogin methods.</p>
    <pre>
def PrintAllEventsOnDefaultCalendar(calendar_service):
  feed = calendar_service.GetCalendarEventFeed()
  print 'Events on Primary Calendar: %s' % (feed.title.text,)
  for i, an_event in enumerate(feed.entry):
    print '\t%s. %s' % (i, an_event.title.text,)
    for p, a_participant in enumerate(an_event.who):
      print '\t\t%s. %s' % (p, a_participant.email,)
      print '\t\t\t%s' % (a_participant.name,)
      print '\t\t\t%s' % (a_participant.attendee_status.value,)</pre>    
    <p>When invoked with no parameters, the <code>GetCalendarEventFeed</code> method returns the user's primary calendar.  By default, the server limits the result set intially returned, but you can use the <code>max_results</code> query parameter to ask the server to send additional results back.  Additionally, you can page through the results returned by using the <code>feed.GetNextLink().href</code> value to get the location of the next set of results.  We'll show you how to create detailed queries like this as we progress through this guide.</p>
        
    <h2><a name="RetrievingDateRange" id="RetrievingDateRange">Retrieving events for a specified date range</a></h2> 
    <p>To print out all events between January 1 2007 and July 1 2007, you can create a query and use it to retrieve information from the <code>CalendarService</code>. Note that while the <code>start_min</code> is inclusive, the <code>start_max</code> is exclusive, so specifying a start_max of '2007-07-01' will include those events up until 2007-06-30 11:59:59PM.  Again, the following example presumes that you already have a <code>CalendarService</code> object which has credentials via either AuthSub or ClientLogin method.</p>
    <pre>
def DateRangeQuery(calendar_service, start_date='2007-01-01', end_date='2007-07-01'):
  print 'Date range query for events on Primary Calendar: %s to %s' % (start_date, end_date,)
  query = gdata.calendar.service.CalendarEventQuery('default', 'private', 'full')
  query.start_min = start_date
  query.start_max = end_date 
  feed = calendar_service.CalendarQuery(query)
  for i, an_event in enumerate(feed.entry):
    print '\t%s. %s' % (i, an_event.title.text,)
    for a_when in an_event.when:
      print '\t\tStart time: %s' % (a_when.start_time,)
      print '\t\tEnd time:   %s' % (a_when.end_time,)</pre>
        
    <h2><a name="RetrievingWithQuery" id="RetrievingWithQuery">Retrieving events matching a full text query</a></h2> 
    <p>The <code>CalendarService</code> class also supports full-text queries.  The full-text query searches the title and content of an event, but it does not search the value of extended properties at the time of this writing.  It uses the default (primary) calendar of the authenticated user and uses the private visibility/full projection feed.  Please see the <a href="../../apis/calendar/reference.html#Feeds">Calendar feed types</a> section of the reference guide for more information on the feed types.  Again, the following example presumes that you already have a <code>CalendarService</code> object which has credentials via either AuthSub or ClientLogin method.</p>
    <pre>
def FullTextQuery(calendar_service, text_query='Tennis'):
  print 'Full text query for events on Primary Calendar: \'%s\'' % ( text_query,)
  query = gdata.calendar.service.CalendarEventQuery('default', 'private', 'full', text_query)
  feed = calendar_service.CalendarQuery(query)
  for i, an_event in enumerate(feed.entry):
    print '\t%s. %s' % (i, an_event.title.text,)
    print '\t\t%s. %s' % (i, an_event.content.text,)
    for a_when in an_event.when:
      print '\t\tStart time: %s' % (a_when.start_time,)
      print '\t\tEnd time:   %s' % (a_when.end_time,)</pre>

    <h1><a name="CreatingEvents" id="CreatingEvents">Creating events</a></h1> 
    <p>The Calendar data API allows you to create two types of events: single-occurrence events and recurring events, which are set up to repeat on a predetermined schedule.</p>

    <h2><a name="CreatingSingle" id="CreatingSingle">Creating single-occurrence events</a></h2>
    <p>To insert a single-occurrence event into a Calendar feed, we first create the <code>CalendarEventEntry</code> and then add it to the calendar using the <code>InsertEvent</code> method.  The <code>InsertEvent</code> method returns a tuple that contains a boolean indicating success or failure.  Upon success, the tuple will contain the calendar entry that was added.  On failure, the tuple will contain the HTTP status code, reason for failure, and message body returned from the server.</p> 

    <pre>
def InsertSingleEvent(calendar_service, title='One-time Tennis with Beth', 
                      content='Meet for a quick lesson', where='On the courts', 
                      start_time=None, end_time=None):
    event = gdata.calendar.CalendarEventEntry()
    event.title = atom.Title(text=title)
    event.content = atom.Content(text=content)
    event.where.append(gdata.calendar.Where(value_string=where))

    if start_time is None:
      # Use current time for the start_time and have the event last 1 hour
      start_time = time.strftime('%Y-%m-%dT%H:%M:%S.000Z', time.gmtime())
      end_time = time.strftime('%Y-%m-%dT%H:%M:%S.000Z', time.gmtime(time.time() + 3600))
      event.when.append(gdata.calendar.When(start_time=start_time, end_time=end_time))
    
    new_event = calendar_service.InsertEvent(event, '/calendar/feeds/default/private/full')
    
    print 'New single event inserted: %s' % (new_event.id.text,)
    print '\tEvent edit URL: %s' % (new_event.GetEditLink().href,)
    print '\tEvent HTML URL: %s' % (new_event.GetHtmlLink().href,)
    
    return new_event</pre>

<p>Note that some members of the <code>CalendarEventEntry</code> class are stored as arrays and others are not.  This is based on the GData event "kind" specification.  Members which are allowed to occur more than once, such as <code>where</code> and <code>who</code>, are stored as arrays.  Even for these elements, Google Calendar may limit the length of the array to one element, such as in the case of the <code<where</code> member.  The general motto to use when working with the Calendar data API is that functionality not available through the GUI will not be available through the API.  Please see the <a href="../../apis/gdata/elements.html#gdEventKind">Event kind section</a> of the GData common elements documentation for more information.</p>
    
    <h2><a name="CreatingRecurring" id="CreatingRecurring">Creating recurring events</a></h2>
    <p>Creating a recurring event is just like creating a single-occurence event except that we have to specify the recurrence information in the <code>CalendarEventEntry</code> object that we're adding.  Here's an example showing how to add a recurring event:</p>

    <pre>
def InsertRecurringEvent(calender_service, title='Weekly Tennis with Beth',
                         content='Meet for a quick lesson', where='On the courts',
                         recurrence_data=None):
    if recurrence_data is None:
      recurrence_data = ('DTSTART;VALUE=DATE:20070501\r\n'
        + 'DTEND;VALUE=DATE:20070502\r\n'
        + 'RRULE:FREQ=WEEKLY;BYDAY=Tu;UNTIL=20070904\r\n')

    event = gdata.calendar.CalendarEventEntry()
    event.title = atom.Title(text=title)
    event.content = atom.Content(text=content)
    event.where.append(gdata.calendar.Where(value_string=where))

    # Set a recurring event
    event.recurrence = gdata.calendar.Recurrence(text=recurrence_data)
    new_event = calendar_service.InsertEvent(event, '/calendar/feeds/default/private/full')
    
    print 'New recurring event inserted: %s' % (new_event.id.text,)
    print '\tEvent edit URL: %s' % (new_event.GetEditLink().href,)
    print '\tEvent HTML URL: %s' % (new_event.GetHtmlLink().href,)
  
    return new_event</pre>
    <p>The recurrence string follows the iCalendar standard (<a href="http://www.ietf.org/rfc/rfc2445.txt">RFC 2445</a>)Please see the <a href="../../apis/gdata/elements.html#gdRecurrence">gd:recurrence section</a> of the GData common elements documentation for more information on gd:recurrence syntax.</p>

    <h1><a name="UpdatingEvents" id="UpdatingEvents">Updating events</a></h1> 
    <p>The general methodology for updating an event is to retrieve the existing event from the server, update the properties you wish to change and save the changes. Here's some sample code to update the title of an event that we've already retrieved from the service.</p>
    <pre>
def UpdateTitle(calendar_service, event, new_title='Updated event title'):
  previous_title = event.title.text
  event.title.text = new_title
  print 'Updating title of event from:\'%s\' to:\'%s\'' % (previous_title, event.title.text,) 
  return calendar_service.UpdateEvent(event.GetEditLink().href, event)</pre>
    <p>Note that the <code>UpdateEvent</code> method (like <code>InsertEvent</code>) returns the 
    <code>CalendarEventEntry</code> object based upon the data returned from the server
    after the event is inserted.  This represents the 'official' state of
    the event on the server.  The 'edit' link returned in this event can
    be used for future updates.  Due to the use of the 'optimistic concurrency'
    method of version control, most GData services do not allow you to send 
    multiple update requests using the same edit URL.  Please see the 
    <a href="../../apis/gdata/reference.html#Optimistic-concurrency">Optomistic Concurrency</a> section of the GData Reference Guide for more information</p>    

    <h1><a name="DeletingEvents" id="DeletingEvents">Deleting events</a></h1>
    <p>To delete an existing event, just call the <code>DeleteEvent</code> method and pass in the edit link from the <code>CalendarEvenyEntry</code>, like this:</p> 
    <pre>def DeleteEvent(calendar_service, event):
  calendar_service.DeleteEvent(event.GetEditLink().href)</pre> 

    <h1><a name="AdditionalOps" id="AdditionalOps">Additional operations</a></h1>
    <p>This section describes other Calendar operations you can perform with the GData Python client library.</p>

    <h2><a name="ExtendedProps" id="ExtendedProps">Extended properties</a></h2>
    <p>You can add extended properties (arbitrary name-value pairs) to Calendar events.  These can be used to store application-specific IDs or other small amounts of information your application needs when interacting with a Google Calendar.  Extended properties are only accessible through the API &ndash; they do not appear in the Calendar user interface.</p>
    <p>In this example, we are adding an extended property <code>id</code> with value <code>1234</code> to the Calendar entry <code>myEntry</code>. It is recommended that you specify the complete schema URL to avoid namespace collisions with other applications that use the same property name.</p>
    <pre>def AddExtendedProperty(calendar_service, event, 
                        name='http://www.example.com/schemas/2005#mycal.id', 
                        value='1234'):
  event.extended_property.append(gdata.calendar.ExtendedProperty(name=name, value=value))  
  print 'Adding extended property to event: \'%s\'=\'%s\'' % (name, value,)
  return calendar_service.UpdateEvent(event.GetEditLink().href, event)</pre>

    <h2><a name="Reminders" id="Reminders">Reminders and Notifications</a></h2>
    <p>The following example shows how to add a reminder to an event.  The example uses the default reminder settings for the user to determine what type of notifications are sent (email, sms, popup, etc.) and sets the reminder for 'minutes' number of minutes before the event.  Currently you can only use values for minutes as specified in the Calendar GUI.  Also, reminders are only available on a user's primary calendar.</p>
    <pre>def AddReminder(calendar_service, event, minutes=10):
  for a_when in event.when:
    if len(a_when.reminder) > 0:
      a_when.reminder[0].minutes = minutes
    else:
      a_when.reminder.append(gdata.calendar.Reminder(minutes=minutes))

  print 'Adding %d minute reminder to event' % (minutes,)
  return calendar_service.UpdateEvent(event.GetEditLink().href, event)</pre>

</div>
  <!-- ########## END PAGE CONTENT ########## -->
</div>
<!-- end wrapper -->
<!-- ########## PAGE FOOTER ########## -->
<div id="footer">
  <div id="footerlogo"><img src="http://www.google.com/images/art.gif" alt="" /></div>
  <div id="copyright">
    <p>&copy; Google Inc. 2007 - <a href="http://www.google.com/privacy.html">Privacy Policy</a> - <a href="http://www.google.com/terms_of_service.html">Terms and Conditions</a> - <a href="http://www.google.com/about.html">About Google</a></p>
  </div>
  <!-- end copyright -->
</div>
<!-- ########## END PAGE FOOTER ########## -->
<p id="date">Last modified:
<script type="text/javascript">
  <!--
  var lm = new Date(document.lastModified);
  document.write(lm.toDateString());
  //-->
</script>
</p>
</body>
</html>
