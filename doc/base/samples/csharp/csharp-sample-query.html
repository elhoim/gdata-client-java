<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" type="text/css" href="../../../css/google.css" />
<link rel="stylesheet" type="text/css" href="../../../css/dev_docs.css" />
<link rel="stylesheet" type="text/css" href="../../local_extensions.css" />
<!--[if IE 7]>
  <link rel="stylesheet" type="text/css" href="../../../css/ie7only.css" />
<![endif]-->
<!--[if lte IE 6]>
  <link rel="stylesheet" type="text/css" href="../../../css/ie6only.css" />
<![endif]-->
<!--[if IE]>
  <link rel="stylesheet" type="text/css" href="../../../css/ieonly.css" />
<![endif]-->
<title>Google Base data API- Accessing the Google Base data API using C#</title>
</head>
<body id="sample_page">
<a name="top" id="top"></a>
<!-- ########## PAGE HEADER ########## -->
<div id="header">
  <div id="logo"><a href="http://code.google.com/"><img src="http://code.google.com/images/code_sm.png" border="0" alt="Return to Google Code homepage" /></a></div>
  <h1 id="doc_title">Google Base data API</h1>
</div>
<!-- ########## END PAGE HEADER ########## -->
<div id="wrapper">
  <!-- ########## SIDE NAVIGATION ########## -->
    <div id="sidenav"> <!-- ID tag identifies current page -->

<ul>
  <li><a href="http://base.google.com/base">Base Home</a></li>
  <li><a href="../../index.html" id="index_link">Base API Home</a></li>
</ul>
<ul>
  <li>
    <h1>Getting Started</h1>
    <ul>
      <li><a href="http://www.google.com/base/api/demo/html/demo.html" id="demo_link">API Demo Page</a> </li>
      <li><a href="../../sample-apps.html" id="sample_link">Sample Applications</a></li>
      <li><a href="../../starting-out.html" id="start_link">Getting Started</a></li>
    </ul>
  </li>
</ul>
<ul>
  <li>
    <h1>Developer's Guide</h1>
    <ul>
      <li><a href="../../attrs-queries.html" id="attsquer_link">Attributes and Queries</a></li>
      <li><a href="http://code.google.com/apis/gdata/index.html">GData Developer's Guide</a></li>
      <li><a href="../../javadevguide.html" id="javaDev_link">Java Developer's Guide</a></li>
      <li><a href="../../csharpdevguide.html" id="cSharpDev_link">C# Developer's Guide</a></li>
    </ul>
  </li>
</ul>
<ul>
  <li>
    <h1>Reference</h1>
    <ul>
      <li><a href="http://base.google.com/base/api/itemTypeDocs" id="itemType_link">Recommended
        Attributes</a></li>
      <li><a href="../../snippets-feed.html" id="snippets_link">Snippets
        Feed</a></li>
      <li><a href="../../items-feed.html" id="items_link">Customer Items
        Feed</a></li>
      <li><a href="../../attributes-feed.html" id="attributes_link">Attributes
        Feed</a></li>
      <li><a href="../../itemtypes-feed.html" id="itemtypes_link">Item Types
        Feed</a></li>
      <li><a href="../../locales-feed.html" id="locales_link">Locales Feed</a></li>
      <li><a href="../../query-lang-spec.html" id="query_link">Query Language</a></li>
      <li><a href="../../ranking-lang-spec.html" id="ranking_link">Expression Language</a></li>
    </ul>
  </li>
</ul>
<ul>
  <li>
    <h1>Related Links</h1>
    <ul>
      <li><a href="../../client-download.html" id="clientdownload_link">Client
        Library </a></li>
      <li><a href="../../signup.html" id="signup_link">API Key</a></li>
      <li><a href="../../terms.html" id="terms_link">Terms of Use</a></li>
      <li><a href="../../release-notes.html" id="rnotes_link">Release Notes </a></li>
    </ul>
  </li>
</ul>
<ul>
  <li>
    <h1>Help Center</h1>
    <ul>
      <li><a href="http://base.google.com/support/bin/topic.py?topic=9231">FAQ</a></li>
      <li><a href="http://groups.google.com/group/Google-Base-data-API">Developer Forum</a></li>
      <li><a href="http://code.google.com/support/bin/topic.py?topic=10024">Knowledge Base</a> </li>
      <li><a href="http://base.google.com/base/base_policies.html">Program Policies</a></li>
      </ul>
  </li>
</ul>
<form action="http://www.google.com/search" method="get" id="searchbox" style="font-size: 80%; margin-bottom: 0;">
  <input type="text" name="q" size="15" id="searchinput" title="Search developer's guide" style="font-size: 100%;"
		onfocus="clearDefaultValue(this);"/>
  <!-- This comment prevents 
	space-->
  <input type="submit" name="submit" value="Go" title="" style="font-size: 90%;"/>
  <input type="hidden" name="ie" value="UTF-8"/>
  <input type="hidden" name="oe" value="UTF-8"/>
  <input type="hidden" name="sitesearch" value="http://code.google.com/apis/base/"/>
  <input type="hidden" name="domains" value="http://code.google.com/apis/base/"/>
</form>
 </div>
  <!-- ########## END SIDE NAVIGATION ########## -->
<div id="pagecontent">
  <!-- ########## PAGE CONTENT ########## -->
  <h2 id="page_title">Understanding the C# Query Sample Application </h2>
    <p><strong>Select a language:</strong> <a href="../java/java-sample.html">Java</a>
    | <a href="../javascript/javascript-sample.html">JavaScript</a> | <a href="../perl/perl-sample.html">Perl</a> | <a href="../php/php-sample-zend.html">PHP</a> | <a href="../python/python-sample.html">Python</a> | 
    <activeLang> C#</activelang> | <a href="../vb/vb-sample.html">VB.NET</a> | <a href="../coldfusion/coldfusion-sample.html">ColdFusion</a> </p>
    <p id="langSelect"><a href="csharp-sample.html">C# Sample Home</a> <strong>QueryExample</strong> <a href="csharp-sample-customertool.html">CustomerTool</a> </p>
    <p><code>gbase_querytool.exe</code> is a simple C# application that runs from
    the command line. It is designed to perform only unauthenticated queries
    on the public snippets feed ( <code> /feeds/snippets</code>). It doesn't
    allow for authentication, so you cannot use it to query the customer-specific
    data items feed. For more information on constructing queries, see <a href="../../attrs-queries.html#queries">Attributes
    and Queries</a>. For more information about the public feed, refer to the <a href="../../snippets-feed.html">Snippets
    Feed</a> reference. </p>
  <p>The  source code for <code>queryexample</code> is available in the <a href="../../client-download.html">C# Client Library</a> in the file <code>cs/samples/gbase/queryexample.cs</code>. The executable is available in the file <code>/cs/lib/Release/gbase_querytool.exe</code>.</p>
<h3>Contents</h3>
<ol class="toc">
    <li><a href="#UsingQueryEx">Using gbase_querytool.exe</a>
      <ol>
        <li><a href="#sampleQueries">Sample queries</a></li>
      </ol>
    </li>
    <li><a href="#QEstepThru">Stepping through the QueryExample code</a></li>
  </ol>
  <h2><a name="UsingQueryEx" id="UsingQueryEx"></a>Using gbase_querytool.exe </h2>
  <p><code>QueryExample</code> uses a command line structured
    like this:</p>
  <pre>gbase_querytool.exe --key <em>dev_key</em> [--url base_url] <em>your_query</em></pre>
  <table>
    <tbody>
      <tr>
        <th width="119"><em>Parameter</em></th>
        <th width="97"><em>Meaning</em></th>
        <th width="518"><em>Notes</em></th>
      </tr>
      <tr>
        <td><code>key</code></td>
        <td>Developer Key </td>
        <td>You can obtain a developer key <a href="../../signup.html">here</a>.</td>
      </tr>
      <tr>
        <td><code> base_url </code> </td>
        <td>URL</td>
        <td>[Optional] By default, the query connects to <code>http://www.google.com/base/</code>,
          but you can enter a specific server instead<code>. </code> </td>
      </tr>
      <tr>
        <td><em><code> your_query </code></em> </td>
        <td>the query string </td>
        <td>Construct a normal <a href="../../attrs-queries.html#queries">Google
          Base query.</a> <br />
          <br />
          If the query string contains one or more spaces or you have
          more than one parameter, you must enclose the entire query
          in quotes. </td>
      </tr>
    </tbody>
  </table>
  <h3><a name="sampleQueries" id="sampleQueries"></a>Sample queries</h3>
  <p>The most basic query unit is a single word that is used as a basis for
    a full text search. If you use a multi-word string, you must enclose
    it in quotes, as in &quot;digital camera&quot; but in the example below,
    the query uses a simple string, so there is no need for quotes. </p>
  <pre>gbase_querytool.exe &nbsp;--key 837738399&nbsp;delectable</pre>
  <p>The response returns as an XML feed:</p>
  <pre>Sending request to: http://www.google.com/base/feeds/snippets/?q=delectable&amp;max-results=10 
Recipes: Delectable Date Muffins - http://www.google.com/base/feeds/snippets/17157731210069334326 
Recipes: Delectable Carob Fudge - http://www.google.com/base/feeds/snippets/10804997642391806178 
Recipes: Delectable Meat Loaf - http://www.google.com/base/feeds/snippets/1725244762499121612 
Recipes: Delectable Cheese Crepes - http://www.google.com/base/feeds/snippets/15581187920521744475 
Recipes: Delectable Chocolate Cheesecake Bites<br /> - http://www.google.com/base/feeds/snippets/12550115891789923473 
Recipes: Delectable Pork in a Mustard Spice Mix<br /> - http://www.google.com/base/feeds/snippets/12265106833065462005 
Recipes: Delectable Carob Fudge - http://www.google.com/base/feeds/snippets/11766929948556732284 
Recipes: Delectable Meat Loaf - http://www.google.com/base/feeds/snippets/8426529378607769341 
Recipes: Pork Spareribs with Delectable Barbecue Sauce<br /> - http://www.google.com/base/feeds/snippets/6246454571705952076 
Recipes: Delectable Pork in a Mustard Spice Mix<br /> - http://www.google.com/base/feeds/snippets/407380460513728684</pre>
  <p> The results only provide three values: item type, title, and the complete
    item URL. You can change <code>queryexample.cs</code> to provide additional
    values as needed. </p>
  <p>You can also set up complex queries that use one or more attributes along
    with a text string, but you must enclose the entire query in quotes.
    For example, in order to obtain a list of all Chinese chicken recipes
    that are described as delectable, you could use a query like these:</p>
  <pre>gbase_querytool.exe  &quot;[item type:recipes]([cuisine:chinese]|[label:chinese]) [main ingredient:chicken] delectable&quot;</pre>
  <p>The response returns as an XML feed. All queries are URL encoded, but
    it is more obvious with complex queries. Here's how the request looks
    with encoding:</p>
  <pre>Sending request to:  http://www.google.com/base/feeds/snippets/?bq=%5Bitem+type%3Arecipes%5D+%28<br/>%5Bcuisine%3A+chinese%5D%7C%5Blabel%3Achinese%5D%29+%5Bmain+ingredient%3A+chicken%5D+dice&amp;max-results=10
    </pre>
  <p>In addition to searching for the &quot;delectable&quot; text string, this
    query searches for several attribute values, the basic syntax for which
    is: </p>
  <pre>[attrib_name: attrib_value]</pre>
  <p> In the command-line above, the | indicates OR, so <code> ( [cuisine:value]
    | (label:value)] </code> indicates that the value of either the cuisine
    or a label must be &quot;chinese.&quot; </p>
  <pre>&quot;[item type:recipes] ([cuisine:chinese]|[label:chinese]) [main ingredient:chicken] dice&quot;</pre>
  <p>For a discussion of how to create queries, go to <a href="../../attrs-queries.html#queries">Attributes
    and Queries</a>. For full details of the Google Base structured query
    language, go to the <a href="../../query-lang-spec.html">Query Language</a> Specification. </p>
  <p class="backtotop"><a href="#top">Back to top</a></p>
  <h2><a name="QEstepThru" id="QEstepThru"></a>Stepping through the QueryExample code </h2>
  <p><code>QueryExample</code> is a simple C# application that runs from the command line to query
    the public snippets feed. It uses Google data API client libraries to set up the query, to perform an HTTP GET, and to
    parse the XML response. </p>
  <p>This section presents a simplified version of the actual code. It does not include code that parses command-line arguments or error handling code. Therefore, the code presented here may not exactly match the actual code that you see in the application. </p>
  <p>To do this programatically, you need to create a GBaseService
    object and then run a query on it. This is done as follows: </p>
  <pre id="extract2">
    GBaseService service = new GBaseService(&quot;Google-Tutorial-1.0&quot;, developerKey);
    GBaseQuery query = new GBaseQuery(GBaseUriFactory.Default.SnippetsFeedUri);
    query.GoogleBaseQuery = &quot;digital camera&quot;;

    GBaseFeed feed = service.Query(query);
</pre>
  <p>GBaseQuery takes the URL of the feed you want to access and adds
    parameters or categories as explained in the <a href="http://code.google.com/apis/gdata/protocol.html#query-requests">Google
    data documentation</a>.  Each parameter supported by the <a href="../../snippets-feed.html">Snippets feed</a> corresponds to a property in the <code>GBaseQuery</code> object.
    In the sample code above, the <code>GoogleBaseQuery</code> property corresponds
    to the <code>bq</code> parameter.</p>
  <p><code>service.Query()</code> connects to the URL generated by GBaseQuery,
    gets the result, parses it and returns a <code>GBaseFeed</code>. The <code>GBaseFeed</code> contains a list of <code>GBaseEntry</code> objects, one for
    each Google Base item returned by the server.</p>
  <pre id="extract3">
    foreach (GBaseEntry entry in feed.Entries)
    {
        System.Console.WriteLine(entry.GBaseAttributes.ItemType +
                                 ": " + entry.Title.Text +
                                 " - " + entry.Id.Uri);
    }
    </pre>
  <p>The code snippet above displays the following information for each entry:</p>
  <ul>
    <li> its
      item type (<code>&lt;g:item_type
      type="text"&gt;</code>) </li>
    <li>its title (<code>&lt;atom:title&gt;</code>) </li>
    <li>its id (<code>&lt;atom:id&gt;</code>)</li>
  </ul>
  <p>Since <code>&lt;g:item_type&gt;</code> is in the <code>g:</code> namespace, you
    first need to get the <code>GBaseAttributes</code> object of the entry
    using <code>entry.GBaseAttributes</code>. Then you get the attribute
    value using the property <code>ItemType</code>.</p>
  <p><code>ItemType</code> is a shortcut that corresponds to <code>GetTextAttribute("item
    type")</code>. <code>GetTextAttribute()</code> gets the first attribute
    in the entry that is called 'item type' and whose type is 'text'. The
    second line in the example above could  be rewritten as follows using <code>GetTextAttribute()</code>:</p>
  <pre id="extract4">
      System.Console.WriteLine(entry.GBaseAttributes.GetTextAttribute(&quot;item type&quot;) +
</pre>
<p align="right">Go to <a href="csharp-sample-customertool.html">CustomerTool</a></p>
</div>
<!-- ########## END PAGE CONTENT ########## -->
</div>
<!-- end wrapper -->
<div id="footer">
  <!-- ########## PAGE FOOTER ########## -->
  <div id="footerlogo"><img src="http://www.google.com/images/art.gif" /></div>
  <div id="copyright">
    <p>&copy;2007 Google - <a href="http://www.google.com/privacy.html">Privacy
      Policy</a> - <a href="http://www.google.com/terms_of_service.html">Terms
      and Conditions</a> - <a href="http://www.google.com/about.html">About
      Google</a></p>
  </div>
  <!-- end copyright -->
</div>
<!-- ########## END PAGE FOOTER ########## -->
<p id="date"> Updated on
  <!-- javascript to display the date this page was updated -->
  <script type="text/javascript">
<!-- hide script from old browsers
    var lm = new Date(document.lastModified);
    document.write(lm.toDateString());
//-->
</script>
  <!-- end javascript -->
</p>
<script
  src="http://www.google-analytics.com/urchin.js"
  type="text/javascript">
</script>
<script type="text/javascript">
  _uacct="UA-18071-1";
  urchinTracker();
</script>
</body>
</html>
