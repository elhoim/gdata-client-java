<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" type="text/css" href="../../../css/google.css" />
<link rel="stylesheet" type="text/css" href="../../../css/dev_docs.css" />
<link rel="stylesheet" type="text/css" href="../../local_extensions.css" />
<!--[if IE 7]>
  <link rel="stylesheet" type="text/css" href="../../../css/ie7only.css" />
<![endif]-->
<!--[if lte IE 6]>
  <link rel="stylesheet" type="text/css" href="../../../css/ie6only.css" />
<![endif]-->
<!--[if IE]>
  <link rel="stylesheet" type="text/css" href="../../../css/ieonly.css" />
<![endif]-->
<title>Google Base data API- Accessing the Google Base data API using Java</title>
<style type="text/css">
<!--
.style1 {color: #FF0000}
-->
</style>
</head>
<body id="sample_page">
<a name="top" id="top"></a>
<!-- ########## PAGE HEADER ########## -->
<div id="header">
  <div id="logo"><a href="http://code.google.com/"><img src="http://code.google.com/images/code_sm.png" border="0" alt="Return to Google Code homepage" /></a></div>
  <h1 id="doc_title">Google Base data API</h1>
</div>
<!-- ########## END PAGE HEADER ########## -->
<div id="wrapper">
  <!-- ########## SIDE NAVIGATION ########## -->
    <div id="sidenav"> <!-- ID tag identifies current page -->

<ul>
  <li><a href="http://base.google.com/base">Base Home</a></li>
  <li><a href="../../index.html" id="index_link">Base API Home</a></li>
</ul>
<ul>
  <li>
    <h1>Getting Started</h1>
    <ul>
      <li><a href="http://www.google.com/base/api/demo/html/demo.html" id="demo_link">API Demo Page</a> </li>
      <li><a href="../../sample-apps.html" id="sample_link">Sample Applications</a></li>
      <li><a href="../../starting-out.html" id="start_link">Getting Started</a></li>
    </ul>
  </li>
</ul>
<ul>
  <li>
    <h1>Developer's Guide</h1>
    <ul>
      <li><a href="../../attrs-queries.html" id="attsquer_link">Attributes and Queries</a></li>
      <li><a href="http://code.google.com/apis/gdata/index.html">GData Developer's Guide</a></li>
      <li><a href="../../javadevguide.html" id="javaDev_link">Java Developer's Guide</a></li>
      <li><a href="../../csharpdevguide.html" id="cSharpDev_link">C# Developer's Guide</a></li>
    </ul>
  </li>
</ul>
<ul>
  <li>
    <h1>Reference</h1>
    <ul>
      <li><a href="http://base.google.com/base/api/itemTypeDocs" id="itemType_link">Recommended
        Attributes</a></li>
      <li><a href="../../snippets-feed.html" id="snippets_link">Snippets
        Feed</a></li>
      <li><a href="../../items-feed.html" id="items_link">Customer Items
        Feed</a></li>
      <li><a href="../../attributes-feed.html" id="attributes_link">Attributes
        Feed</a></li>
      <li><a href="../../itemtypes-feed.html" id="itemtypes_link">Item Types
        Feed</a></li>
      <li><a href="../../locales-feed.html" id="locales_link">Locales Feed</a></li>
      <li><a href="../../query-lang-spec.html" id="query_link">Query Language</a></li>
      <li><a href="../../ranking-lang-spec.html" id="ranking_link">Expression Language</a></li>
    </ul>
  </li>
</ul>
<ul>
  <li>
    <h1>Related Links</h1>
    <ul>
      <li><a href="../../client-download.html" id="clientdownload_link">Client
        Library </a></li>
      <li><a href="../../signup.html" id="signup_link">API Key</a></li>
      <li><a href="../../terms.html" id="terms_link">Terms of Use</a></li>
      <li><a href="../../release-notes.html" id="rnotes_link">Release Notes </a></li>
    </ul>
  </li>
</ul>
<ul>
  <li>
    <h1>Help Center</h1>
    <ul>
      <li><a href="http://base.google.com/support/bin/topic.py?topic=9231">FAQ</a></li>
      <li><a href="http://groups.google.com/group/Google-Base-data-API">Developer Forum</a></li>
      <li><a href="http://code.google.com/support/bin/topic.py?topic=10024">Knowledge Base</a> </li>
      <li><a href="http://base.google.com/base/base_policies.html">Program Policies</a></li>
      </ul>
  </li>
</ul>
<form action="http://www.google.com/search" method="get" id="searchbox" style="font-size: 80%; margin-bottom: 0;">
  <input type="text" name="q" size="15" id="searchinput" title="Search developer's guide" style="font-size: 100%;"
		onfocus="clearDefaultValue(this);"/>
  <!-- This comment prevents 
	space-->
  <input type="submit" name="submit" value="Go" title="" style="font-size: 90%;"/>
  <input type="hidden" name="ie" value="UTF-8"/>
  <input type="hidden" name="oe" value="UTF-8"/>
  <input type="hidden" name="sitesearch" value="http://code.google.com/apis/base/"/>
  <input type="hidden" name="domains" value="http://code.google.com/apis/base/"/>
</form>
 </div>
  <!-- ########## END SIDE NAVIGATION ########## -->
<div id="pagecontent">
  <!-- ########## PAGE CONTENT ########## -->
  <h2 id="page_title">Understanding the Java QueryExample1 API Sample Application</h2>
  <p><strong>Select a language:</strong> |<activeLang> Java </activelang>
| <a href="../javascript/javascript-sample.html">JavaScript</a> | <a href="../perl/perl-sample.html">Perl</a> | <a href="../php/php-sample-zend.html">PHP</a> | <a href="../python/python-sample.html">Python</a> | <a href="../csharp/csharp-sample.html">C#</a> | <a href="../vb/vb-sample.html">VB.NET</a> | <a href="../coldfusion/coldfusion-sample.html">ColdFusion</a> </p>
  <p id="langSelect"> <a href="java-sample.html">Java Sample Home</a> <strong>QueryExample1</strong> <a href="java-sample-api-query2.html">QueryExample2</a> <a href="java-sample-api-query3.html">QueryExample3</a> <a href="java-sample-api-insert.html">InsertExample</a> <a href="java-sample-api-update.html">UpdateExample</a> </p>
  <p><code>QueryExample1</code> queries
    the Google Base data API and displays the result. It is a simple Java application that runs from the
    command line. </p>
  <p><code>QueryExample1</code> performs an unauthenticated query on the public <a href=
  'http://code.google.com/apis/base/snippets-feed.html'>snippets feed</a> (<code>/feeds/snippets</code>) and dumps the unformatted query response to the console.</p>
 <h3>Contents</h3>
<ol class="toc">
    <li><a href="#QE1run">Running QueryExample1</a> </li>
    <li><a href="#QE1stepThru">Stepping through the QueryExample1 code </a></li>
  </ol>
  <h2><a name="QE1run" id="QE1run"></a>Running QueryExample1</h2>
  <ol>
    <li><a href="http://code.google.com/apis/base/signup.html">Obtain a developer key</a> for an &quot;installed application&quot;. </li>
    <li>Edit <code><a href="QueryExample1.java" target="_blank">QueryExample1.java</a></code> and fill in the <code>DEVELOPER_KEY</code> static string with your developer key. <a href=
  'http://code.google.com/apis/base/signup.html'></a> </li>
    <pre>private static final String DEVELOPER_KEY = &quot;&quot;;</pre>
    <li>Compile and run the example using your favorite editor, or using the
      command line: </li>
    <pre>javac com/google/api/gbase/examples/basic/QueryExample1.java
java com/google/api/gbase/examples/basic/QueryExample1
</pre>
  </ol>
  <p>The output (formatted here for readability) will be as follows: </p>
  <pre>&lt;feed&gt;
  &lt;id&gt;http:base.google.com/base/feeds/snippets&lt;/id&gt;
  &lt;updated&gt;2006-08-22T14:14:11.984Z&lt;/updated&gt;  
  &lt;title type=&quot;text&quot;&gt;Items matching query: cars [item type : products]&lt;/title&gt;
  &lt;link rel=&quot;alternate&quot; type=&quot;text/html&quot; href=&quot;http://base.google.com&quot;/&gt;
  &lt;link rel=&quot;http://schemas.google.com/g/2005#feed&quot; type=&quot;application/atom+xml&quot; href=&quot;http://base.google.com/base/feeds/snippets&quot;/&gt;
  &lt;link rel=&quot;self&quot; type=&quot;application/atom+xml&quot; href=&quot;http://base.google.com/base/feeds/snippets?key=ABQ...9P2Y4A&amp;bq=cars+%5Bitem+type+%3A+products%5D&quot;/&gt;
  &lt;link rel=&quot;next&quot; type=&quot;application/atom+xml&quot; href=&quot;http://base.google.com/base/feeds/snippets?start-index=26&amp;max-results=25&amp;key=ABQ...9P2Y4A&amp;bq=cars+%5Bitem+type+%3A+products%5D&quot;/&gt;
  &lt;generator version=&quot;1.0&quot; uri=&quot;http://base.google.com&quot;&gt;GoogleBase&lt;/generator&gt;
  &lt;openSearch:totalResults&gt;278120&lt;/openSearch:totalResults&gt;
  &lt;openSearch:itemsPerPage&gt;25&lt;/openSearch:itemsPerPage&gt;
    &lt;entry&gt;
      &lt;id&gt;http://base.google.com/base/feeds/snippets/10062394959501653657&lt;/id&gt;
      &lt;published&gt;2006-06-30T21:45:12.000Z&lt;/published&gt;
      &lt;updated&gt;2006-07-28T00:58:14.000Z&lt;/updated&gt;  
        ...
</pre>
  <h2><a name="QE1stepThru" id="QE1stepThru"></a>Stepping through the QueryExample1 code</h2>
  <p>First, we define the URL of the feed we are connecting to,
    as well as the query that we are going to run.</p>
  <pre>private static final String SNIPPETS_FEED = &quot;http://base.google.com/base/feeds/snippets&quot;;
private static final String QUERY = &quot;cars [item type : products]&quot;;
</pre>
  <p>Feel free to change the query to a more relevant or interesting one. Take
    a look at the <a href=
'../../query-lang-spec.html'>Google Base Query
    Language</a> description if you need some inspiration. </p>
  <p>The Google Base data API server requires a developer key to connect
    to any of the feeds. If you haven't already obtained one, you can <a href="../../signup.html">obtain one</a>. You only need to do this once; once you have a developer's key, it can be used for any request. </p>
  <p>If you already have a <a href=
  'http://www.google.com/apis/maps/'>Maps API</a> key, just use that one
    (caveat: if the key was generated for a URL which also has path components,
    it will not work for Google Base data API authsub applications). </p>
  <p>Insert your
    developer key in the <code>DEVELOPER_KEY</code> attribute.</p>
  <p>The <code>displayItems()</code> method creates a <code>java.net.URL</code> instance, which connects to the snippets feed. It passes the URL-encoded query as the <code>bq</code> (Base Query) parameter, and the
    developer key as the <code>key</code> parameter: </p>
  <pre>URL url = new URL(SNIPPETS_FEED + &quot;?bq=&quot; + 
  URLEncoder.encode(QUERY, &quot;UTF-8&quot;) + &quot;&amp;key=&quot; + DEVELOPER_KEY);
</pre>
  <p>After opening a connection on the snippets feed, we grab the connection's
    input stream and dump its content to the output, character by character.</p>
  <pre>HttpURLConnection httpConnection = (HttpURLConnection)url.openConnection();
InputStream inputStream = httpConnection.getInputStream();


int ch;
  while ((ch=inputStream.read()) &gt; 0) {
    System.out.print((char)ch);
  }
</pre>
  <p>In the <code>main</code> method, we create an instance of <code>QueryExample1</code>, and invoke its <code>displayItems()</code> method.</p>
  <pre>public static void main(String[] args) throws IOException, SAXException, ParserConfigurationException {
  new QueryExample1().displayItems();
}
</pre>
<p align="right">Go to <a href="java-sample-api-query2.html">QueryExample2</a></p>
</div>
<!-- ########## END PAGE CONTENT ########## -->
</div>
<!-- end wrapper -->
<div id="footer">
  <!-- ########## PAGE FOOTER ########## -->
  <div id="footerlogo"><img src="http://www.google.com/images/art.gif" /></div>
  <div id="copyright">
    <p>&copy;2007 Google - <a href="http://www.google.com/privacy.html">Privacy
      Policy</a> - <a href="http://www.google.com/terms_of_service.html">Terms
      and Conditions</a> - <a href="http://www.google.com/about.html">About
      Google</a></p>
  </div>
  <!-- end copyright -->
</div>
<!-- ########## END PAGE FOOTER ########## -->
<p id="date"> Updated on
  <!-- javascript to display the date this page was updated -->
  <script type="text/javascript">
<!-- hide script from old browsers
    var lm = new Date(document.lastModified);
    document.write(lm.toDateString());
//-->
</script>
  <!-- end javascript -->
</p>
<script
  src="http://www.google-analytics.com/urchin.js"
  type="text/javascript">
</script>
<script type="text/javascript">
  _uacct="UA-18071-1";
  urchinTracker();
</script>
</body>
</html>
